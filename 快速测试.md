# 快速测试指南

## 1. 最简单的测试方法

### 测试工具列表

```bash
cd yapi-mcp-server
echo '{"jsonrpc":"2.0","id":1,"method":"tools/list"}' | go run .
```

### 测试初始化

```bash
echo '{"jsonrpc":"2.0","id":1,"method":"initialize","params":{"protocolVersion":"2024-11-05","capabilities":{}}}' | go run .
```

### 测试调用工具

```bash
export YAPI_BASE_URL="http://your-yapi-instance.com"
echo '{"jsonrpc":"2.0","id":1,"method":"tools/call","params":{"name":"get_yapi_interface","arguments":{"url":"http://yapi.example.com/project/123/interface/api/456"}}}' | go run .
```

## 2. 使用测试脚本

```bash
chmod +x test.sh
./test.sh
```

或者传入自定义URL：

```bash
./test.sh "http://your-yapi.com/project/123/interface/api/456"
```

## 3. 运行单元测试

```bash
go test -v
```

## 4. 构建并测试

```bash
# 构建
go build -o bin/yapi-mcp-server .

# 测试
echo '{"jsonrpc":"2.0","id":1,"method":"tools/list"}' | ./bin/yapi-mcp-server
```

## 5. 调试技巧

### 查看详细输出

```bash
echo '{"jsonrpc":"2.0","id":1,"method":"tools/list"}' | go run . 2>&1
```

### 格式化JSON输出（需要安装jq）

```bash
echo '{"jsonrpc":"2.0","id":1,"method":"tools/list"}' | go run . | jq .
```

## 常见问题

1. **程序立即退出**: 这是正常的，MCP服务器通过stdin/stdout通信，需要输入JSON消息
2. **JSON解析错误**: 检查JSON格式是否正确
3. **环境变量未生效**: 使用 `export` 命令设置环境变量

